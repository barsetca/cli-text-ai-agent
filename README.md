# CLI Text AI Agent

CLI приложение для работы с нейросетями через ProxyAPI. Поддерживает два режима работы: с выводом рассуждений и без.

## Возможности

- **Режим без вывода рассуждений** - использует OpenAI GPT-4o mini для быстрых ответов
- **Режим с выводом рассуждений** - использует Anthropic Claude Sonnet 4.5 с отображением процесса мышления модели
- **Поддержка веб-поиска** - возможность использовать интернет-поиск для получения актуальной информации
- **Сохранение контекста** - модель запоминает историю диалога
- **Русскоязычный интерфейс** - все взаимодействие на русском языке

## Требования

- Python 3.10 или выше
- API ключ от ProxyAPI

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd cli_text_ai_agent
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

4. Добавьте ваш API ключ ProxyAPI в файл `.env`:
```
PROXYAPI_KEY=ваш_ключ_здесь
```

## Использование

Запустите приложение:
```bash
python3 main.py
```

### Режимы работы

1. **Режим без вывода рассуждений (GPT-4 mini)**
   - Быстрые ответы без отображения процесса рассуждений
   - Использует модель `gpt-4o-mini` или `gpt-4o-mini-search-preview` (с веб-поиском)

2. **Режим с выводом рассуждений (Claude Sonnet 4.5)**
   - Показывает процесс мышления модели перед финальным ответом
   - Использует модель `claude-sonnet-4-5-20250929` с включенным режимом thinking

### Веб-поиск

При выборе любого режима вам будет предложено использовать интернет-поиск:
- **Для OpenAI**: автоматически переключается на модель `gpt-4o-mini-search-preview`
- **Для Anthropic**: добавляется инструмент `web_search_20250305`

### Выход из чата

Для выхода из чата введите команду `exit`. После этого вы вернетесь в главное меню.

## Структура проекта

```
cli_text_ai_agent/
├── main.py                 # Основное приложение
├── test_claude_reasoning.py # Тестовый файл для проверки рассуждений Claude
├── requirements.txt        # Зависимости проекта
├── .env.example           # Пример файла с переменными окружения
├── .gitignore             # Игнорируемые файлы для Git
├── README.md              # Этот файл
└── docs/                  # Документация
    └── text_ai_model_doc.pdf
```

## Тестирование

Для проверки работы режима рассуждений Claude запустите тестовый файл:
```bash
python3 test_claude_reasoning.py
```

Этот файл отправит запрос "Объясни мне теорему Пифагора" и выведет полный JSON ответ от API, включая блоки рассуждений.

## API и модели

### OpenAI API
- **Базовый URL**: `https://openai.api.proxyapi.ru/v1`
- **Модель по умолчанию**: `gpt-4o-mini`
- **Модель с веб-поиском**: `gpt-4o-mini-search-preview`

### Anthropic API
- **Базовый URL**: `https://api.proxyapi.ru/anthropic`
- **Модель**: `claude-sonnet-4-5-20250929`
- **Режим рассуждений**: включен через параметр `thinking` с `budget_tokens: 1024`

## Особенности реализации

- **Сохранение контекста**: класс `ChatSession` управляет историей диалога для обоих режимов
- **Обработка рассуждений**: код автоматически находит и выводит блоки типа `"thinking"` в ответах Claude
- **Обработка ошибок**: автоматический перебор альтернативных моделей при ошибках

## Лицензия

Этот проект создан для личного использования.

## Поддержка

При возникновении проблем:
1. Убедитесь, что API ключ правильно указан в файле `.env`
2. Проверьте, что все зависимости установлены: `pip install -r requirements.txt`
3. Убедитесь, что у вас есть доступ к интернету для работы с ProxyAPI
